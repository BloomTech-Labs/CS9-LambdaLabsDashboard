'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var _express=require('express'),_express2=_interopRequireDefault(_express),_jsonwebtoken=require('jsonwebtoken'),_jsonwebtoken2=_interopRequireDefault(_jsonwebtoken),_userModel=require('../Users/userModel'),_userModel2=_interopRequireDefault(_userModel);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var Secret=process.env.SECRET_KEY,Router=_express2.default.Router();Router.post('/',function(a,b){var c=a.body.token;return c?void _jsonwebtoken2.default.verify(c,Secret,function(a,c){a?b.send({auth:!1}):_userModel2.default.findById(c.sub).then(function(a){var c=a.name,d=a.email,e=a._id,f=a.subscribed,g=a.subscribedDate;b.json({name:c,email:d,_id:e,subscribed:f,subscribedDate:g,auth:!0})}).catch(function(){return b.send({auth:!0,_id:c.sub})})}):b.send({auth:!1})}),exports.default=Router;