"use strict";var _express=require("express"),_express2=_interopRequireDefault(_express),_projectUsersModel=require("./projectUsersModel.js"),_projectUsersModel2=_interopRequireDefault(_projectUsersModel),_jwtMiddleWare=require("../MiddleWare/jwtMiddleWare.js"),_middleWare=require("../MiddleWare/middleWare.js"),_authJWT=require("../MiddleWare/authJWT.js"),_authJWT2=_interopRequireDefault(_authJWT);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var router=_express2.default.Router();router.get("/",function(a,b){_projectUsersModel2.default.find({}).then(function(a){b.status(200).json({s:a})}).catch(function(a){b.status(500).json({msg:a})})}),router.post("/",function(a,b){if(0===a.body.users.length||""===a.body.projectId)return b.send(" can not post empty projectusers ");var c=a.body.projectId;_projectUsersModel2.default.findOne({projectId:c}).then(function(c){if(c)b.send("sorry we have one already ");else{var d=a.body,e=(0,_projectUsersModel2.default)(d);e.save().then(function(a){b.status(200).json({p:a})}).catch(function(a){b.status(200).json({msg:"... not able to post your projectsUsers",error:a})})}})}),router.put("/:id",function(a,b){var c=a.params.id,d=a.body;_projectUsersModel2.default.findByIdAndUpdate(c,d,{new:!0}).then(function(a){b.status(200).json({msg:"users updated successfully",p:a})}).catch(function(){b.status(500).json({msg:"... not able to update your users"})})}),router.get("/:id",function(a,b){var c=a.params.projectId;_projectUsersModel2.default.findOne(c).then(function(a){b.status(200).json(a)}).catch(function(){b.status(500).json({msg:"we cant find this projectusers "})})}),router.delete("/:id",function(a,b){var c=a.params.id;_projectUsersModel2.default.findById(c).remove().then(function(){b.status(200).json({msg:"...users  successfully deleted"})}).catch(function(){b.status(200).json({msg:"... not able to  delete users"})})}),module.exports=router;