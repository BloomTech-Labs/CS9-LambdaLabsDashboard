'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var _toConsumableArray2=require('babel-runtime/helpers/toConsumableArray'),_toConsumableArray3=_interopRequireDefault(_toConsumableArray2),_slicedToArray2=require('babel-runtime/helpers/slicedToArray'),_slicedToArray3=_interopRequireDefault(_slicedToArray2),_regenerator=require('babel-runtime/regenerator'),_regenerator2=_interopRequireDefault(_regenerator),_asyncToGenerator2=require('babel-runtime/helpers/asyncToGenerator'),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),_axios=require('axios'),_axios2=_interopRequireDefault(_axios),_Github=require('../Helpers/Github'),_Github2=_interopRequireDefault(_Github),_Trello=require('../Helpers/Trello'),_Trello2=_interopRequireDefault(_Trello),_Arrays=require('../Helpers/Arrays');function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}require('dotenv').config();var trelloKey=process.env.TRELLO_KEY,trelloToken=process.env.TRELLO_TOKEN,auth='?key='+trelloKey+'&token='+trelloToken,gha={headers:{Authorization:'bearer '+process.env.GITHUB_TOKEN}};exports.default=function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function a(b){var c;return _regenerator2.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,_axios2.default.all([_axios2.default.get('https://api.trello.com/1/boards/5b70b2c75105750d2795cccb/members'+auth),_axios2.default.get('https://api.trello.com/1/boards/5b70b2c75105750d2795cccb/cards'+auth),_axios2.default.get('https://api.trello.com/1/boards/5b70b2c75105750d2795cccb/lists'+auth),_axios2.default.get('https://api.github.com/repos/Lambda-School-Labs/CS9-LambdaLabsDashboard/pulls?state=closed&page=1',gha),_axios2.default.get('https://api.github.com/repos/Lambda-School-Labs/CS9-LambdaLabsDashboard/pulls?state=closed&page=2',gha),_axios2.default.get('https://api.github.com/repos/Lambda-School-Labs/CS9-LambdaLabsDashboard/pulls?state=closed&page=3',gha),_axios2.default.get('https://api.github.com/repos/Lambda-School-Labs/CS9-LambdaLabsDashboard/pulls?state=closed&page=4',gha),_axios2.default.get('https://api.github.com/repos/Lambda-School-Labs/CS9-LambdaLabsDashboard/pulls?state=closed&page=5',gha),_axios2.default.get('https://api.github.com/repos/Lambda-School-Labs/CS9-LambdaLabsDashboard/pulls?state=closed&page=6',gha),_axios2.default.get('https://api.github.com/repos/Lambda-School-Labs/CS9-LambdaLabsDashboard/pulls?state=closed&page=7',gha),_axios2.default.get('https://api.github.com/repos/Lambda-School-Labs/CS9-LambdaLabsDashboard/contributors',gha)]);case 2:if(c=a.sent,!c){a.next=9;break}return a.next=6,parseData(c,b);case 6:return a.abrupt('return',a.sent);case 9:return a.abrupt('return',!1);case 10:case'end':return a.stop();}},a,void 0)}));return function(){return a.apply(this,arguments)}}();var handleError=function(){return!1},getValidUsers=function(a){return(0,_Arrays.arrayFilter)(a,function(a){var b=a.name,c=b.split(' '),d=(0,_slicedToArray3.default)(c,2),e=d[0],f=d[1];if('null'!==b&&e&&f)return a})},parseData=function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function a(b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;return _regenerator2.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=(0,_slicedToArray3.default)(b,11),e=d[0],f=d[1],g=d[2],h=d[3],i=d[4],j=d[5],k=d[6],l=d[7],m=d[8],n=d[9],o=d[10],p=[].concat((0,_toConsumableArray3.default)(h.data),(0,_toConsumableArray3.default)(i.data),(0,_toConsumableArray3.default)(j.data),(0,_toConsumableArray3.default)(k.data),(0,_toConsumableArray3.default)(l.data),(0,_toConsumableArray3.default)(m.data),(0,_toConsumableArray3.default)(n.data)),a.next=4,(0,_Github2.default)(o.data,p,gha);case 4:return q=a.sent,r=new _Trello2.default(q,e.data,f.data,g.data),s=r.trello,t=r.completeness,u=r.updatedTeamStats,v=r.totalCards,w=r.inProgress,a.abrupt('return',{project:c,team:getValidUsers(u),trello:s,totalCards:v,inProgress:w,completeness:t});case 7:case'end':return a.stop();}},a,void 0)}));return function(){return a.apply(this,arguments)}}();