"use strict";var _express=require("express"),_express2=_interopRequireDefault(_express),_userModel=require("../Users/userModel.js"),_userModel2=_interopRequireDefault(_userModel),_jwtMiddleWare=require("../Middleware/jwtMiddleWare.js");function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var router=_express2.default.Router();router.get("/",function(a,b){b.send("you are logged-in ")}),router.post("/",function(a,b){var c=a.body,d=c.username,e=c.password;_userModel2.default.findOne({username:d}).then(function(a){a&&""!==a.username&&""!==a.password?a.checkPassWord(e).then(function(c){if(c){var d=(0,_jwtMiddleWare.makeToken)(a);b.status(200).json({msg:"login successful",p:a,token:d})}else b.status(401).json({msg:"wrong password"})}).catch(function(a){b.status(500).json({msg:"error happening",err:a})}):b.status(401).json({msg:"wrong username"})}).catch(function(a){b.status(500).json({msg:a})})}),module.exports=router;