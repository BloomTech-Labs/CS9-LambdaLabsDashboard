"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _express=require("express"),_express2=_interopRequireDefault(_express),_classModel=require("./classModel.js"),_classModel2=_interopRequireDefault(_classModel),_jwtMiddleWare=require("../MiddleWare/jwtMiddleWare.js"),_middleWare=require("../MiddleWare/middleWare.js"),_authJWT=require("../MiddleWare/authJWT.js"),_authJWT2=_interopRequireDefault(_authJWT);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var Router=_express2.default.Router();Router.get("/",function(a,b){_classModel2.default.find({}).populate("students","-_id").populate("project","-_id").then(function(a){b.status(200).json({classes:a})}).catch(function(a){b.status(500).json({msg:a})})}),Router.post("/",_middleWare.userEmpty,function(a,b){var c=a.body,d=(0,_classModel2.default)(c);d.save().then(function(){b.status(200).json({newClass:d})}).catch(function(a){b.status(200).json({msg:"... not able to post your user",error:a})})}),Router.get("/:id",function(a,b){var c=a.params.id;_classModel2.default.findById(c).populate("Students","-_id").populate("LambdaProject","-_id").then(function(a){b.status(200).json(a)}).catch(function(){b.status(500).json({msg:"we cant display this class "})})}),Router.put("/:id",function(a,b){var c=a.params.id,d=a.body;_classModel2.default.findByIdAndUpdate(c,d,{new:!0}).then(function(a){b.status(200).json({msg:"class updated successfully",p:a})}).catch(function(){b.status(500).json({msg:"... not able to update your class"})})}),Router.delete("/:id/:userID",function(a,b){var c=a.params,d=c.id,e=c.userID;_classModel2.default.findById(d).remove().then(function(){_classModel2.default.find({userID:e}).then(function(a){return b.status(200).json({classes:a})}).catch(function(){return b.send("error")})}).catch(function(){b.send("error")})}),exports.default=Router;